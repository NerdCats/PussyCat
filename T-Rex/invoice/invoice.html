<html ng-app="invoiceApp" ng-controller="invoiceCtrl">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
        <script src="../node_modules/angular/angular.js"></script>
        <script src="../node_modules/angular-route/angular-route.js"></script>
    </head>    
    <body>
        <style>            
            body {
                font-family: cursive;
                margin: 0;
            }
            .center-block {
                display: block;                
                width: 270px;
/*                background-color: #F5F5F5;*/
            }
            .gohq {
                text-align: center;                                             
                font-size: 11px;
            }
            .gohq-div {
/*                width: 100px;*/
                display: block;
                margin: 0 auto;
            }
            .address {
                word-wrap: break-word;
                width: 270px !important;
                font-size: 11px;
                text-align: center;
            }
            .address-header {
                text-align: center;
                margin-top: 10px;
                margin-bottom: 5px;
                display: block;
                margin: 10px auto;
            }
            #logo {
                width: 100px;
                display: block;
                margin: 10px auto;
            }
            .style-one {
                border: 0;
                height: 1px;
                background: #333;
                background-image: linear-gradient(to right, #ccc, #333, #ccc);
            }
            .tracking-help {
                font-size: 10px;
                display: block;
                margin: 10px auto;                
                text-align: center;
            }
            h4{
                margin-bottom: -0px;
            }
            .date {            
                font-size: 11px;
                display: block;
                margin: 0 auto;
                text-align: center;
            }
            table {
                width: 270px;
                border-collapse: collapse;
                margin-top: 10px
            }
            td, th {
                font-size: 11px;
                border: 1px solid #999;
                padding: 2px;
                text-align: center;
            }
            .signature {
                display: flex;
                flex-direction: row;                
            }
            .authorization {
                font-size: 11px;
                margin-top: 20px;
            }
            .authorization-div {
                text-align: center;
            }

            .asset-list {
                display: inline-block;
                list-style: none;
                /*margin: 0;*/
                float: left;
                padding-right: 5px;
            }
            .asset-list-ul {
                margin: 0;
                margin-left: -80px;
                margin-right: 60px;
            }

            .asset {
                display: flex;
                flex-flow: row;
            }

            .asset div {
                margin: 0 auto;
            }

            .service-charge {
                font-size: 11px;
            }
            .service-charge-bdt {
                float: right;
            }
            </style>

            <div class="center-block">            
                <img src="logo.png" id="logo">
                <div class="gohq-div">
                    <div class="gohq">H-28, R-20, Block-K, Banani, Dhaka</div>                
                </div>
            
            <hr class="style-one">
            <div class="date">
                <div>Job ID: {{job.HRID}}</div>
                <div>Date: {{ today | date:'EEEE, MMMM d, y' }}</div>
                <div>Payment Method: {{job.PaymentMethod}}</div>
                <div class="asset">
                    <div>Delivery Man:</div>
                    <ul class="asset-list-ul">
                       <li class="asset-list" ng-repeat="(key, value) in job.Assets"> {{value.UserName}} </li>
                    </ul>
                </div>
            </div>
            <hr class="style-one">
            <div>
                <h3 class="address-header">Pickup Address</h3>
                <!-- <div class="address">Name: M Plus Electronics</div> -->
                <!-- <div class="address">Mobile:01922962787</div> -->
                <!-- <div class="address">email : shtelecom468@gmail.com Address: Circle Ambia Shopping Mall, Level #01, Shop # 04 (1st Floor), Rampura Bazaar, Dhaka-1219., Bashundhara, Dhaka</div> -->
                <div class="address" ng-show="job.Order.Type === 'ClassifiedDelivery'">Pickup Time: {{job.Order.JobTaskETAPreference[0].ETA | date: 'medium'}}</div>
                <div class="address">{{job.Order.From.Address}}</div>
            </div>
            <hr class="style-one">
            <div>
                <h3 class="address-header">Delivery Address</h3>
                <!-- <div class="address">Name: Mr. Rezvee</div> -->
                <!-- <div class="address">Mobile: 01771117031</div> -->
                <!-- <div class="address">Address: uttara sector-5, Road-6, House-13 , Uttara, Dhaka</div> -->
                <div class="address" ng-show="job.Order.Type === 'ClassifiedDelivery'">Delivery Time: {{job.Order.JobTaskETAPreference[1].ETA | date: 'medium'}}</div>
                <div class="address">{{job.Order.To.Address}}</div>
            </div>
            <hr class="style-one">
            <div>
                <table>
                    <thead>
                        <th>Package Name</th>
                        <th>Qty</th>
                        <th>Unit Price</th>
                        <th>Wght</th>
                        <th>Total (BDT)</th>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in job.Order.OrderCart.PackageList">
                            <td>{{item.Item}}</td>
                            <td>{{item.Quantity}}</td>
                            <td>{{item.Price}}</td>
                            <td>{{item.Weight}}</td>
                            <td>{{item.Total}}</td>
                        </tr>                        
                        <tr>                            
                            <td colspan="4">Item Total Price</td>
                            <td>{{job.Order.OrderCart.TotalToPay - job.Order.OrderCart.ServiceCharge}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br>
            <div class="service-charge">
                <span>Go! Fetch Service Charge (Vat Included)</span>
                <span class="service-charge-bdt">{{job.Order.OrderCart.ServiceCharge}} tk</span>
            </div>
            <hr class="style-one">
            <div class="signature">
                <div class="authorization">
                    <p class="authorization-div"><strong>.....................</strong></p>
                    <p class="authorization-div"><strong>Authorized By</strong></p>                    
                </div>
                <div style="width:60px"></div>
                <div class="authorization">
                    <p class="authorization-div"><strong>.....................</strong></p>
                    <p class="authorization-div"><strong>Recieved By</strong></p>
                </div>
            </div>
            <hr class="style-one">
            <div>                
                <span class="tracking-help">track this job from <br>www.gofetch.com/#/track/<strong>{{job.HRID}}</strong></span>
            </div>
            <div>
                <span class="tracking-help">For Complain and Queries Call: +88 01735952047</span>
            </div>
        </div>        
    </body>

    <script type="text/javascript">
        var app = angular.module('invoiceApp', ['ngRoute']);
        app.controller('invoiceCtrl',['$scope', '$http', '$window', invoiceCtrl])
        function invoiceCtrl($scope, $http, $window) {
            var vm = $scope;
            var id = $window.location.search.substring(1);
            console.log(id)

            vm.today = new Date();
            vm.job = {};
            var prod = "http://gofetch.cloudapp.net/api/job/";
            var dev = "http://taskcatdev.azurewebsites.net/api/job/";
            var url =  prod + id;
            $http({
                method: 'GET',
                url: url,                
            }).then(function success(response){
                vm.job = response.data;
                console.log(vm.job);
            }, function error(error) {
                alert(error.Message)
            })
        };
    </script>
   
</html>